"use client";

import React, { useEffect } from "react";
import { motion, useAnimation } from "framer-motion";

import styles from "./Subscription.module.css";

export const Subscription: React.FC = () => {
    const shieldControls = useAnimation();
    const svgControls = useAnimation();
    const titleControls = useAnimation();
    const priceControls = useAnimation();

    useEffect(() => {
        shieldControls.start({
            translateX: 0, 
            opacity: [0, 1, 0],
            transition: {
                translateX: {
                    duration: .5,
                    ease: "easeInOut",
                },
                opacity: {
                    duration: 3.5,
                    ease: "easeInOut",
                    times: [0, 0.1, 1]
                }
            } 
        });

        svgControls.start({
            opacity: 1,
            transition: {
                duration: .5,
                delay: 1,
                ease: "easeInOut"
            }
        });

        titleControls.start({
            translateX: 0, 
            opacity: [0, 1, 0],
            transition: {
                translateX: {
                    duration: .5,
                    delay: .3,
                    ease: "easeInOut",
                },
                opacity: {
                    duration: 3.8,
                    delay: .3,
                    ease: "easeInOut",
                    times: [0, 0.1, 1]
                }
            }
        });

        priceControls.start({
            scale: 1, 
            opacity: 1,
            transition: {
                duration: .5,
                delay: 4,
                type: "spring",
                stiffness: 150,
                damping: 10
            }
        });
    }, []);

    return (
        <div className={styles.container}>
            <motion.div 
                className={styles.shield}
                initial={{ translateX: -100, opacity: 0 }}
                animate={shieldControls}
                style={{ willChange: "transform, opacity" }}
            >
                <svg className={styles.icon} width="119" height="28" viewBox="0 0 119 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill="#0070F0" fillRule="evenodd" clipRule="evenodd" d="M11.3418 13.937C11.3755 6.25688 17.5654 0 25.3416 0C33.0505 0 39.4303 6.29114 39.3416 14C39.3416 21.7089 33.0505 28 25.3416 28C17.6536 28 11.3757 21.831 11.3418 14.0633V24.4557H6.37975L0 4.07594H11.3418V13.937ZM20.1138 14C20.1138 16.8354 22.5062 19.2279 25.3416 19.2279C28.2657 19.2279 30.5695 16.8354 30.5695 14C30.5695 11.1646 28.1771 8.77215 25.3416 8.77215C22.5062 8.77215 20.1138 11.1646 20.1138 14Z"></path>
                    <path fill="#0070F0" fillRule="evenodd" clipRule="evenodd" d="M61.9116 8.1013H58.0936L55.3918 12.8494H54.001L53.9567 2.57367H50.3425V21.132H53.9567L54.001 16.0384H55.3829L58.9706 21.132H62.9746L58.2974 14.3819L61.9116 8.1013ZM89.2662 14.2136C88.532 13.7384 87.7362 13.3659 86.901 13.1063L86.1037 12.8051L85.8911 12.7254L85.8879 12.7242C85.3928 12.5385 84.8724 12.3434 84.8547 11.8396C84.8501 11.69 84.8834 11.5417 84.9515 11.4085C85.0197 11.2753 85.1205 11.1615 85.2445 11.0778C85.5062 10.8974 85.8129 10.7931 86.1303 10.7766C86.8225 10.7288 87.5085 10.9333 88.0615 11.3524L88.1589 11.4144L90.09 9.19093L89.9926 9.11121C89.7522 8.89688 89.491 8.70697 89.213 8.54427C88.715 8.25932 88.1732 8.05877 87.6097 7.95075C86.7979 7.77805 85.9588 7.77805 85.147 7.95075C84.3622 8.05463 83.6176 8.3598 82.9856 8.83659C82.5814 9.15284 82.2436 9.54562 81.9913 9.99248C81.7389 10.4393 81.5771 10.9315 81.5151 11.441C81.4043 12.3603 81.6378 13.288 82.1706 14.0453C82.8784 14.829 83.8036 15.3841 84.8281 15.6398L84.9876 15.693L85.3508 15.817C86.6618 16.2599 87.0339 16.4371 87.2465 16.7028C87.3454 16.8365 87.401 16.9973 87.4059 17.1635C87.4059 17.7924 86.6353 18.0493 86.1126 18.2088C85.7472 18.2774 85.3715 18.2704 85.0089 18.1881C84.6463 18.1058 84.3044 17.95 84.0043 17.7304C83.5187 17.4057 83.1031 16.987 82.7818 16.4991C82.7283 16.5549 82.5507 16.7324 82.3185 16.9645C81.6669 17.6157 80.5854 18.6964 80.6115 18.7225L80.6736 18.8111C81.6383 20.0189 82.9898 20.8573 84.5004 21.1852C84.8456 21.2519 85.1947 21.2963 85.5457 21.3181H85.9089C87.1022 21.3431 88.2712 20.9793 89.2396 20.2816C89.8946 19.8183 90.3972 19.1708 90.6835 18.4214C90.8577 17.9182 90.9194 17.383 90.8643 16.8535C90.8092 16.3239 90.6387 15.8129 90.3646 15.3564C90.0846 14.9011 89.71 14.5114 89.2662 14.2136ZM98.5856 13.1062C99.418 13.3658 100.211 13.7384 100.942 14.2135C101.378 14.5113 101.746 14.8977 102.023 15.3474C102.297 15.8039 102.467 16.3149 102.522 16.8445C102.577 17.3741 102.516 17.9093 102.342 18.4124C102.055 19.1619 101.553 19.8094 100.898 20.2727C99.9293 20.9703 98.7602 21.3341 97.5669 21.3091H97.2037C96.8528 21.2879 96.5036 21.2435 96.1584 21.1762C94.6479 20.8483 93.2964 20.0099 92.3316 18.8022L92.2608 18.7136C92.2433 18.6904 93.0979 17.8332 93.7435 17.1857C94.0826 16.8456 94.364 16.5633 94.4311 16.4901C94.757 16.9742 95.1719 17.392 95.6535 17.7215C95.9552 17.9413 96.2986 18.0972 96.6626 18.1794C97.0267 18.2617 97.4038 18.2686 97.7707 18.1998C98.2933 18.0404 99.0551 17.7835 99.0551 17.1545C99.0599 16.9882 99.0066 16.8253 98.9045 16.6939C98.6919 16.4281 98.3199 16.251 97 15.808L96.6368 15.684L96.4862 15.6309C95.4616 15.3752 94.5365 14.8201 93.8287 14.0364C93.2912 13.2812 93.0572 12.3516 93.1732 11.432C93.2381 10.9227 93.4029 10.4312 93.6583 9.98577C93.9137 9.54035 94.2546 9.14978 94.6614 8.8365C95.295 8.36248 96.0388 8.05762 96.8228 7.95066C97.6376 7.77776 98.4796 7.77776 99.2943 7.95066C99.855 8.05898 100.394 8.25955 100.889 8.54418C101.171 8.70462 101.435 8.89467 101.677 9.11111L101.766 9.19083L99.8347 11.4143L99.7461 11.3523C99.1924 10.9347 98.5069 10.7303 97.815 10.7765C97.4975 10.793 97.1909 10.8973 96.9291 11.0777C96.8078 11.1647 96.7086 11.279 96.6394 11.4113C96.5702 11.5436 96.5329 11.6902 96.5305 11.8395C96.5571 12.3444 97.0709 12.5393 97.5758 12.7253L97.7795 12.8051L98.5856 13.1062ZM73.7815 8.10125V9.37685H73.6221C72.6328 8.38629 71.2926 7.82604 69.8927 7.81778C69.0345 7.80082 68.1823 7.9648 67.3917 8.29906C66.6011 8.63331 65.8898 9.13033 65.304 9.75776C64.1227 11.0807 63.4893 12.8037 63.5324 14.5767C63.4865 16.3795 64.1188 18.1339 65.304 19.4931C65.8758 20.121 66.576 20.6184 67.3571 20.9516C68.1381 21.2848 68.9818 21.446 69.8307 21.4242C71.2323 21.3979 72.5803 20.8807 73.6398 19.9626H73.7815V21.1054H77.5375V8.10125H73.7815ZM73.9675 14.6476C74.0052 15.6956 73.6551 16.7206 72.9842 17.5266C72.6627 17.8867 72.2659 18.1717 71.822 18.3615C71.378 18.5513 70.8978 18.6413 70.4153 18.625C69.9474 18.6329 69.4836 18.535 69.0588 18.3387C68.6339 18.1423 68.2588 17.8526 67.9615 17.4911C67.2986 16.6685 66.9584 15.6323 67.0048 14.5767C66.9747 13.5529 67.3215 12.5537 67.9793 11.7686C68.2821 11.4126 68.6599 11.1279 69.0857 10.9349C69.5114 10.742 69.9745 10.6455 70.4419 10.6525C70.9212 10.6375 71.3978 10.7291 71.8374 10.9206C72.2771 11.1121 72.6687 11.3987 72.9842 11.7598C73.655 12.5693 74.0049 13.597 73.9675 14.6476ZM114.637 9.37697V8.10137H118.393V21.1055H114.637V19.9627H114.495C113.436 20.8808 112.088 21.398 110.686 21.4244C109.837 21.4461 108.994 21.2849 108.213 20.9517C107.431 20.6185 106.731 20.1211 106.16 19.4932C104.974 18.1341 104.342 16.3797 104.388 14.5768C104.345 12.8038 104.978 11.0808 106.16 9.75788C106.748 9.13109 107.461 8.6346 108.253 8.30044C109.044 7.96629 109.898 7.80191 110.757 7.8179C112.154 7.82848 113.49 8.38855 114.478 9.37697H114.637ZM113.84 17.5267C114.514 16.7228 114.865 15.6963 114.823 14.6477C114.865 13.5965 114.514 12.5673 113.84 11.7599C113.524 11.3988 113.133 11.1122 112.693 10.9207C112.253 10.7292 111.777 10.6377 111.297 10.6526C110.83 10.6456 110.367 10.7421 109.941 10.9351C109.515 11.128 109.138 11.4127 108.835 11.7687C108.177 12.5538 107.83 13.5531 107.86 14.5768C107.814 15.6324 108.154 16.6686 108.817 17.4912C109.114 17.8527 109.489 18.1425 109.914 18.3388C110.339 18.5351 110.803 18.633 111.271 18.6251C111.753 18.6414 112.234 18.5514 112.677 18.3616C113.121 18.1718 113.518 17.8868 113.84 17.5267Z"></path>
                </svg>
            </motion.div>
            <motion.h1
                className={styles.price}
                initial={{ scale: 0, opacity: 0 }}
                animate={priceControls}
                style={{ willChange: "transform, opacity" }}
            >
                3300₽ / мес.
            </motion.h1>
        </div>
    )
};